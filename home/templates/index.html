{% extends 'layouts/base.html' %}
{% load static %}

{% block title %} Dashboard {% endblock title %}
{% block content %}

<section class="section dashboard">
    <div class="row">

        <!-- Left side columns -->
        <div class="col-lg-12">
            <div class="row">


                <div class="col-lg-6">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Line Chart</h5>

                            <!-- Bar Chart -->
                            <canvas id="lineChart" style="max-height: 400px;"></canvas>

                            <!-- End Bar CHart -->

                        </div>
                    </div><!-- End main columns -->

                </div>

                <div class="col-lg-6">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Bar Chart</h5>

                            <!-- Bar Chart -->
                            <canvas id="barChart" style="max-height: 400px;"></canvas>

                            <!-- End Bar CHart -->

                        </div>
                    </div><!-- End main columns -->

                </div>

                <div class="col-lg-6">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Doughnut Chart</h5>

                            <!-- Doughnut Chart -->
                            <canvas id="doughnutChart" style="max-height: 400px;"></canvas>

                            <!-- End Doughnut CHart -->

                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Pie Chart</h5>

                            <!-- Doughnut Chart -->
                            <canvas id="pieChart" style="max-height: 400px;"></canvas>

                            <!-- End Doughnut CHart -->

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</section>
{% endblock content %}

{% block extra_scripts %}
<script>
    document.addEventListener("DOMContentLoaded", () => {
        get_donut_chart();
    });
function generateRandomColor() {
    // Generating a random color in hexadecimal format
    return '#' + Math.floor(Math.random() * 16777215).toString(16);
}

function generateRandomColors(count) {
    // Generating an array of random colors based on the count provided
    const colors = [];
    for (let i = 0; i < count; i++) {
        colors.push(generateRandomColor());
    }
    return colors;
}

    function get_donut_chart() {
        fetch("{% url 'home:chart' %}")
            .then(response => response.json())
            .then(data => {
                const backgroundColors = generateRandomColors(data.labels.length);
                 const backgroundColors2 = generateRandomColors(data.labels.length);
                // Create the doughnut chart using Chart.js with dynamic colors
                new Chart(document.getElementById('doughnutChart'), {
                    type: 'doughnut',
                    data: {
                        labels: data.labels,
                        datasets: [{
                            data: data.data,
                            backgroundColor: backgroundColors,
                            borderWidth: 1
                        }]
                    },
                    options: {
                        // Customize options if needed
                    }
                });
                new Chart(document.getElementById('pieChart'), {
                    type: 'pie',
                    data: {
                        labels: data.labels,
                        datasets: [{
                            data: data.data,
                             backgroundColor: backgroundColors2,
                            borderWidth: 1
                        }]
                    },
                    options: {
                        // Customize options if needed
                    }
                });

                // Create the bar chart using Chart.js with dynamic colors
                new Chart(document.getElementById('barChart'), {
                    type: 'bar',
                    data: {
                        labels: data.labels,
                        datasets: [{
                            label: 'Question Count',
                             backgroundColor: backgroundColors,
                            data: data.data,
                            borderWidth: 1
                        }]
                    },
                    options: {
                        // Customize options if needed
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });

                // Create the bar chart using Chart.js with dynamic colors
                new Chart(document.getElementById('lineChart'), {
                    type: 'line',
                    data: {
                        labels: data.labels,
                        datasets: [{
                            label: 'Question Count',
                             backgroundColor: backgroundColors2,
                            data: data.data,
                            borderWidth: 1
                        }]
                    },
                    options: {
                        // Customize options if needed
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });


            })
            .catch(error => console.error('Error fetching data:', error));
    }
</script>

{% endblock extra_scripts %}